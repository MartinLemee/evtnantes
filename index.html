<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>


	<title>Nantes metropole</title>
	<style>
		.message {
			color:red;
		}
	</style>
</head>
<body >
	<div id="demo">
		<div v-for="record in infos" :id="record" >

		<pre>{{ record.fields }}:

		</pre>

	</div>
	</div>
</body>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>

	var apiURL = 'https://data.nantesmetropole.fr/api/records/1.0/search/?dataset=244400404_agenda-evenements-nantes-nantes-metropole&facet=emetteur&facet=rubrique&facet=lieu&facet=ville';

  var demo = new Vue({

    el: '#demo',

    data: {
			records: ['fields', 'record_timestamp'],
			currentRec: 'fields',
			infos: null,


    },

		created: function () {
			this.fetchData()
		},

		watch: {
			currentRecord: 'fetchData'
		},

		methods: {
			fetchData: function() {
				var self = this
				axios.get(apiURL)
				.then(function (response) {
					self.infos = response.data.records
					console.log(self.infos)
				})

				/*fetch(apiURL)
				.then((response) => { return response.json() })
				.then((data) => {
					this.infos = response.data
					console.log(this.infos)
				})
				.catch(error => {
      console.log(error);
    })*/
	},
			}
	});

</script>
</html>
